@model IEnumerable<PhenobottleUI.Models.Phenobottle>

@{
    ViewData["Title"] = "Control Panel";
}

<head>
    <link rel="stylesheet" href="~/css/controlpanel.css" />
</head>

<body>
    <div class="mainhead">
        <h2>Control Panel</h2>
    </div>

    <div class="card">

        <div class="top-bar">
            <h2 class="cardhead">Connect</h2>
            <button class="button2" id="refresh">Refresh <i class="fa fa-refresh" aria-hidden="true"></i></button>

        </div>
        <div class="card">
            <h3>Devices Found</h3>
            <div class="connected-devices">
                @if (Model != null && Model.Count() > 0)
                {
                    <table width="100%" class="connected-table">
                        <thead>
                            <tr>
                                <th>
                                    Phenobottle ID
                                </th>
                                <th>
                                    Treatment
                                </th>
                                <th>
                                    Replicate
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var value in Model)
                            {
                                <tr>
                                    <td width="50%">@value.ID</td>
                                    <td width="30%">@value.Treatment</td>
                                    <td witdh="20">@value.ReplicateNumber</td>
                                </tr>
                            }
                        </tbody>

                    </table>
                }
                else
                {
                    <table width="100%" class="connected-table">
                        <thead>
                            <tr>
                                <th>
                                    Phenobottle ID
                                </th>
                                <th>
                                    Treatment
                                </th>
                                <th>
                                    Replicate
                                </th>
                            </tr>
                        </thead>
                    </table>
                }
            </div>

        </div>

    </div>

    <div class="cardhalf">
        <div class="top-bar">
            <h2 class="cardhead">Lights</h2>
            <button class="button2" id="refresh">Default <i class="fa fa-refresh" aria-hidden="true"></i></button>
        </div>

        <div class="card">
            <h5 class="label">Red</h5>
            <div class="setting">
                <label class="setting-label">Intensity (%):</label>
                <input class="setting-input" id="red-intensity" />
            </div>
            <div class="setting">
                <label class="setting-label">Frequency (Hz):</label>
                <input class="setting-input" />
            </div>


            <h5 class="label">Green</h5>
            <div class="setting">
                <label class="setting-label">Intensity (%):</label>
                <input class="setting-input" />
            </div>
            <div class="setting">
                <label class="setting-label">Frequency (Hz):</label>
                <input class="setting-input" />
            </div>

            <h5 class="label">Blue</h5>
            <div class="setting">
                <label class="setting-label">Intensity (%):</label>
                <input class="setting-input" />
            </div>
            <div class="setting">
                <label class="setting-label">Frequency (Hz):</label>
                <input class="setting-input" />
            </div>

            <div class="test-set">
                <button class="button1" id="message">Test</button>
                <button class="button2">Set</button>
            </div>

        </div>




    </div>



    <div class="card">
        <button id="message">Send Message</button>
        <button id="message2">Send Short Msg</button>
        <button id="longMessage">Send long message</button>
    </div>

    <script type="text/javascript">function addNums(length) {
            var output = "";
            for (var i = 0; i < length; i++) {
                output += i.toString();
            }
            return output;
        }

        document.getElementById("refresh").onclick = function () {
            console.log("Attempting to connect...")
            socket = new WebSocket("ws://localhost:443");

            socket.onopen = function (event) {
                console.log("Connected")
            }
        }

        document.getElementById("message").onclick = function () {
            // Short message
            socket.send(document.getElementById("red-intensity").value);
        }

        message2.onclick = function () {
            socket.send("Test String.");
        }

        longMessage.onclick = function () {
            socket.send(addNums(1000));
        }</script>


</body>




